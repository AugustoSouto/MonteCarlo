---
title: "Entrega 5 Ejercicio 8.1"
author: "Augusto Souto & Federico Molina"
date: "8 de mayo de 2019"
output:
  pdf_document:
    toc: yes
    fig_caption: yes
  html_document:
    df_print: paged
    toc: yes
  word_document:
    toc: yes
keep_tex: yes
lang: es
geometry: margin=2cm
fontsize: 10pt
urlcolor: blue
numbersections: yes 
header-includes: 
  - \usepackage{amsmath}
  - \usepackage{pgfplots}
  - \usepackage{pgf}
  - \usepackage{float}
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(
  results="hide",
	message = FALSE,
	warning = FALSE,
	error=FALSE,
	fig.pos="H",
	options(xtable.comment = FALSE)
)
library(magrittr)
```

\newpage

#Ejercicio 8.1

##Parte A

Elegir al menos dos fuentes de números aleatorios disponibles en
Internet (sitio o tabla con valores). Explicar cómo funcionan, como se
accede a los números, y qué características tienen.

###Numeros Aleatorios de Random.org
Los numeros aleatorios de [Random.org](https://www.random.org) provienen del ruido atomsférico, el cual es causado por procesos naturales, como las descargas de los rayos en una tormenta. Estas descargas son principalmente descargas que ocurren desde las nubes hacia la tierra. 

Según [wikipedia](https://en.wikipedia.org/wiki/Atmospheric_noise), las sumas de estas descargas componen al ruido atmosférico. El mismo es medido a través de un receptor de radio. Dado  que el proceso es de naturaleza estocástica, los numeros generados también lo son.

El acceso a los numeros se da en en la una  [sección](https://www.random.org/decimal-fractions/) de la página dedicada a tal fin. Alli es necesario especificar la necesidad de numeros ubicados entre 0 y 1 (también puede usarse otro rango y normalizar los numeros), la cantidad, y numero de decimales.

Las características de estos numeros aleatorios son la independencia y uniformidad. La primer característica nos dice que cada numero sorteado no depende de ningun otro numero de la secuencia. La segunda característica nos dice que no existen puntos del intervalo establecido (en nuestro caso el intervalo 0-1) que tengan mayor chance de salir sorteados.

###Numeros Aleatorios de Australia National University (ANU)

Estos numeros aleatorios también provienen de un proceso físico, en este caso los mismos son generados por la medición de las [fluctuaciones cuanticas del vacío](https://en.wikipedia.org/wiki/Quantum_fluctuation). Según wikipedia, dicho proceso describe la variación de la cantidad de energía en un punto del espacio, lo que se da por principios físicos de incertidumbre. Esto hace que el proceso sirva para generar numeros aleatorios.

La obtención de dichos numeros se puede conseguir mediante varios canales, como explicita la [página del equipo de óptica cuántica de la ANU](http://photonics.anu.edu.au/qoptics/Research/qrng.php). En este caso se prefirió usar la libreria de R (lebguaje a utilizar en la parte B) "qrandom", la que nos deja acceder a dichos numeros en varias formas. En particular, mediante el comando qrandomunif se obtienen numeros aleatorios y uniformes entre 0 y 1.

Las propiedades de los numeros son las mismas descritas anteriormente, dado que son uniformemente distribuidos e independientes.

##Parte B

En base a este análisis, elegir una de las fuentes, fundamentar la
selección, y modificar el ejercicio 3.1, parte a (visto en la sesión 3) para que
emplee dichos números aleatorios (en lugar de los generados por bibliotecas
como hasta el momento). Comparar si la salida obtenida es consistente o
no con la obtenida en los experimentos de la parte a del ejercicio 3.1.

###Resolucion
El ejercicio es hecho con los datos de Random.org para $n=10^{4}$ y con los datos de la ANU para $n=10^{5}$.Esta elección considera la máxima cantidad de numeros aleatorios que se pueden pedir a ambas fuentes en un pedido.


####Random.org
En primer lugar, introducimos los datos de que se obtuvieron de la página. Los mismos se copiaron de la misma, pasandose a csv.

En total, se piden 20000 numeros, ya que la dimensión del problema es 2. A continuación se pueden ver los primeros numeros de las secuencias.

```{r, results='markup'}
x_randomorg<-read.csv("C:/Users/Usuario/Desktop/10_4.csv", header = F) #importar
y_randomorg<-read.csv("C:/Users/Usuario/Desktop/10_4_2.csv", header = F)

head(x_randomorg, header=F) #vista rapida#
head(y_randomorg) 

```


También reintroducimos el código del ejercicio 3.1. Ahora adaptamos el código de forma que sea una función de los números aleatorios que introducimos así como del numero de corridas.


```{r, results="markup"}

estimar<-function(x_ran, y_ran, corridas){
t1<-Sys.time()
#parametros#
r<-0.4
n<-corridas

#sorteo de valores en el hipercubo#
x<-x_ran[1:n,] %>% as.matrix()
y<-y_ran[1:n,] %>% as.matrix()

coor<-cbind(x, y)

#centro#
c_x<-rep(0.5,  n)
c_y<-rep(0.5,  n)
cent<-cbind(c_x, c_y)

valor<-vector("numeric", length=n)
#valores que toma la función en los puntos sorteados dentro de la region#
for (i in 1:n) {
  
  if(sum((coor[i,]-cent[i,])^2)<=r^2){
    valor[i]=(200*x[i]*y[i])/max(x[i],y[i])
  }else{
    valor[i]=0}
}

s<-vector("numeric", length=n)
t<-vector("numeric", length=n)

t[1]=0
s[1]=valor[1]

for (i in 2:n) {
    t[i]<-t[i-1]+(1-(1/i))*(valor[i] -( s[i-1] / (i-1)) )^2 
    s[i]<-s[i-1]+valor[i]

t2<-Sys.time()
}

print(t2-t1)

int<-s[n]/n         #INTEGRAL ESTIMADA#
var_int<-t[n]/(n-1) #VARIANZA ESTIMADA#
var_est<-var_int/n #VARIANZA MUESTRA


options("scipen"=999, "digits"=4)



return(c(int, var_est))
}
```

Una vez adaptado el codigo a los vectores de numeros aleatorios, obtenemos la estimación del volumen y desviación del estimador.

```{r, results="markup"}
estimar(x_ran=x_randomorg, y_ran=y_randomorg, corridas = 10^4)

```

En el caso de los valores de ANU, se cargan primero los datos mediante la libreria. 

```{r}
if (!require('qrandom')) install.packages('qrandom')

x_anu<-qrandom::qrandomunif(10^5, 0,1) %>% as.matrix() 
y_anu<-qrandom::qrandomunif(10^5, 0,1) %>% as.matrix()
```

Los primeros valores de para conjunto de numeros aleatorios son los siguientes:
```{r, results="markup"}
head(x_anu)
head(y_anu)
```
Por último, la estimación y desvío estándar del volumen son:
```{r, results="markup"}
#estimaciones#
estimar(x_ran=x_anu, y_ran=y_anu, corridas = 10^5)

```

####Comparación con 3.1
Como puede verse, los valores estimados están muy cercanos a la estimación del ejercicio original, donde el valor estimado fue 38.17. En particular, el ejercicio que usó más numeros aleatorios (numeros de ANU) distó en aproxmadamente 0.10 unidades. En el segundo caso, pese a tener solo $10^{4}$ numeros, la estimación estuvo a menos de 1 unidad respecto al valor del ejercicio original.Por lo tanto, podríamos hipotetizar, antes de testear la calidad de los numeros en alguna prueba (como, por ejemplo, los ["diehard tests"](https://en.wikipedia.org/wiki/Diehard_tests) de Marsaglia), que los números son efectivamente aleatorios.

####Otros Datos
El equipo utilizado fue un Intel core i3 M380, con 4 gb de memoria y 2.53 GHz.


